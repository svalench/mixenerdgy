{"version":3,"file":"pages/certificates.js","sources":["webpack:///./components/certComponents/certificateCard.vue?e301","webpack:///./components/certComponents/certificateCard.vue?dc0e","webpack:///./components/certComponents/certificateCard.vue?365a","webpack:///./components/certComponents/certFilter.vue?44a4","webpack:///./components/certComponents/certFilter.vue","webpack:///./components/certComponents/certFilter.vue?dca9","webpack:///./components/certComponents/certFilter.vue?f984","webpack:///./components/certComponents/certificateCard.vue?c84e","webpack:///./components/certComponents/certificateCard.vue","webpack:///./components/certComponents/certificateCard.vue?62f1","webpack:///./components/certComponents/certificateCard.vue?d963","webpack:///./pages/certificates.vue?aee2","webpack:///./pages/certificates.vue","webpack:///./pages/certificates.vue?45e1","webpack:///./pages/certificates.vue?ce23"],"sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./certificateCard.vue?vue&type=style&index=0&id=4515291c&scoped=true&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"44880b12\", content, true, context)\n};","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./certificateCard.vue?vue&type=style&index=0&id=4515291c&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".cardCert[data-v-4515291c]{transition:.3s}.cardCert[data-v-4515291c]:hover{box-shadow:5px 5px 20px #0d82d3}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-skeleton-wrapper',{attrs:{\"loading\":_vm.show},scopedSlots:_vm._u([{key:\"loading\",fn:function(){return [_c('b-card',{attrs:{\"title\":\"Фильтр\"}},[_c('div',[_c('b-skeleton',{staticClass:\"skelet-cl\",attrs:{\"width\":\"85%\"}}),_vm._v(\" \"),_c('b-skeleton',{staticClass:\"skelet-cl\",attrs:{\"width\":\"65%\"}}),_vm._v(\" \"),_c('b-skeleton',{staticClass:\"skelet-cl\",attrs:{\"width\":\"70%\"}}),_vm._v(\" \"),_c('b-skeleton',{staticClass:\"skelet-cl\",attrs:{\"width\":\"80%\"}}),_vm._v(\" \"),_c('b-skeleton',{staticClass:\"skelet-cl\",attrs:{\"width\":\"60%\"}}),_vm._v(\" \"),_c('b-skeleton',{staticClass:\"skelet-cl\",attrs:{\"width\":\"90%\"}})],1)])]},proxy:true}])},[_vm._v(\" \"),_c('b-card',{staticStyle:{\"background-color\":\"white\"},attrs:{\"title\":\"Фильтр\"}},[_c('b-form-checkbox-group',{attrs:{\"stacked\":\"\",\"name\":\"flavour-1\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},_vm._l((_vm.filters),function(val,nn){return _c('b-row',{key:nn},[_c('b-form-checkbox',{ref:\"checkb\",refInFor:true,attrs:{\"size\":\"lg\",\"value\":val.id},on:{\"change\":function($event){return _vm.setFilter()}}},[_vm._v(_vm._s(val.name))])],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: \"certFilter\",\n  data(){\n    return{\n      filters:[],\n      selected:[],\n      show:false,\n    }\n  },\n  mounted() {\n    this.getSelected()\n    this.getFilters();\n  },\n  watch: {\n    '$route.query'(nv) {\n      this.getSelected()\n    },\n  },\n  methods:{\n    /**\n     * получение значений фильтров\n     * @returns {Promise<void>}\n     */\n    async getFilters(){\n        this.show = true;\n      let data = await this.$axios.get(`/catalog/categories/?limit=99999`);\n      console.log(data)\n        this.filters = data.data.results;\n      // this.filters.push({name:\"Без категории\",id:0})\n        this.show = false;\n      },\n     /**\n       * добавление фильтров в путь\n       */\n      setFilter(){\n        this.$router.push({ path: this.$route.path, query: { filter: JSON.parse(JSON.stringify(this.selected)), page: 1 }})\n      },\n      getSelected(){\n        var selected = JSON.parse(JSON.stringify(this.$route.query.filter?this.$route.query.filter:[]))\n        if(Array.isArray(selected)){\n          selected = selected.map(x=>(x-0))\n        }else{\n          selected = [selected-0]\n        }\n        this.selected = selected\n      },\n  },\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./certFilter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./certFilter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./certFilter.vue?vue&type=template&id=1fdb1589&scoped=true&\"\nimport script from \"./certFilter.vue?vue&type=script&lang=js&\"\nexport * from \"./certFilter.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"1fdb1589\",\n  \"085d7cc8\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.certificate.doc}},[_c('b-card',{staticClass:\"cardCert\",staticStyle:{\"margin\":\"5%\"}},[_c('b-card-title',{staticStyle:{\"font-size\":\"20px\",\"min-height\":\"50px\"}},[_vm._v(_vm._s(_vm.certificate.name))]),_vm._v(\" \"),_c('b-card-text',{staticStyle:{\"overflow\":\"auto\"}},[_c('object',{attrs:{\"trusted\":\"yes\",\"data\":((_vm.certificate.doc) + \"#view=FitH&scrollbar=0&toolbar=0&navpanes=0\"),\"height\":\"200\",\"type\":\"application/pdf\"}},[_c('p',[_vm._v(\"Не удалось загрузить документ.\")])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: \"certificateCard\",\n  props:['certificate']\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./certificateCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./certificateCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./certificateCard.vue?vue&type=template&id=4515291c&scoped=true&\"\nimport script from \"./certificateCard.vue?vue&type=script&lang=js&\"\nexport * from \"./certificateCard.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./certificateCard.vue?vue&type=style&index=0&id=4515291c&scoped=true&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"4515291c\",\n  \"7e9289d2\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_vm._ssrNode(\"<div class=\\\"row\\\" style=\\\"padding-top:30px; \\\" data-v-1b5ae0de>\",\"</div>\",[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"Главная\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"Сертификаты\")])],1)],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"row\\\" style=\\\"padding-top:30px; \\\" data-v-1b5ae0de>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"col-3\\\" data-v-1b5ae0de>\",\"</div>\",[_c('cert-filter')],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"col\\\" data-v-1b5ae0de>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"row\\\" data-v-1b5ae0de>\",\"</div>\",_vm._l((_vm.certificates),function(c,k){return _vm._ssrNode(\"<div class=\\\"col-6\\\" style=\\\" margin:0; height: 100%;\\\" data-v-1b5ae0de>\",\"</div>\",[_vm._ssrNode(\"<a target=\\\"_blank\\\"\"+(_vm._ssrAttr(\"href\",c.doc))+\" data-v-1b5ae0de>\",\"</a>\",[_c('b-card',{staticClass:\"cardCert\",staticStyle:{\"margin\":\"5%\"}},[_c('b-card-title',{staticStyle:{\"font-size\":\"20px\",\"min-height\":\"50px\"}},[_vm._v(_vm._s(c.name))]),_vm._v(\" \"),_c('b-card-text',{staticStyle:{\"overflow\":\"auto\"}})],1)],1)])}),0)])],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"paginator\\\" data-v-1b5ae0de>\",\"</div>\",[_c('b-pagination',{attrs:{\"total-rows\":_vm.count,\"per-page\":_vm.limit,\"align\":\"center\",\"first-number\":\"\",\"last-number\":\"\"},on:{\"input\":function($event){return _vm.paginate()}},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport CertificateCard from \"../components/certComponents/certificateCard\";\nimport CertFilter from \"../components/certComponents/certFilter\";\nexport default {\n  components: {CertFilter, CertificateCard},\n  name: \"certificatesPage\",\n  data(){\n    return{\n      currentPage:1,\n      count:0,\n      certificates:[],\n      loading:false,\n      limit: 9,\n      offset:0,\n    }\n  },\n  async fetch(){\n    this.currentPage = this.$route.query['page']?this.$route.query['page']:1;\n    await this.getCertificates();\n  },\n   watch:{\n    '$route.query'(nv){\n      this.currentPage = nv.page?nv.page:1;\n      this.getCertificates()\n    }\n  },\n  mounted() {\n     this.getCertificates();\n  },\n  methods:{\n        /**\n     * постраничный\n     */\n    paginate(){\n      this.$router.push({ path: this.$route.path, query: { page: this.currentPage}})\n      this.getCertificates()\n    },\n    /**\n     * метод получает список сертификатов с бэка\n     * @returns {Promise<void>}\n     */\n    async getCertificates(){\n      let params = '';\n       if(this.$route.query.filter){\n        if(Array.isArray(this.$route.query.filter)){\n          for(let c of this.$route.query.filter){\n          params += `&parent_ch=${c}`\n        }\n        }else{\n          params += `&parent_ch=${this.$route.query.filter}`\n        }\n\n      }\n      this.offset = (this.currentPage-1)*this.limit;\n      let res = await this.$axios.get(`/catalog/certificates/?limit=${this.limit}&offset=${this.offset}${params}`).catch(e=>{\n        console.error(e);\n        this.$message({message:'Произошла ошибка загрузки данных', type:'error'})\n      });\n      this.count = res.data.count;\n      this.certificates = res.data.results;\n    },\n  }\n\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./certificates.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./certificates.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./certificates.vue?vue&type=template&id=1b5ae0de&scoped=true&\"\nimport script from \"./certificates.vue?vue&type=script&lang=js&\"\nexport * from \"./certificates.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"1b5ae0de\",\n  \"aae9f190\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {CertFilter: require('C:/Users/алексадр/PycharmProjects/mixenerdgy/components/certComponents/certFilter.vue').default})\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA5BA;AAlBA;;AC/BA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAFA;;ACfA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAhCA;AA1BA;;AClDA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}